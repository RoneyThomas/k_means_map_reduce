<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello K Means</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
    <style>
        .heading {
            margin-top: 4em;
        }

        .file-name {
            visibility: hidden;
        }

        body {
            padding: 1.5em;
        }
    </style>
    <script>
        function handleFiles(files) {
            if (files[0].type !== "text/csv") {
                console.log("file is not CSV");
                let modal = document.getElementsByClassName("modal")[0];
                modal.classList.add("is-active");
                document.getElementsByClassName("modal-close")[0].addEventListener('click', function () {
                    modal.classList.remove("is-active");
                });
            } else {
                document.getElementsByClassName("file-name")[0].style.visibility = "visible";
                document.getElementsByClassName("file-name")[0].textContent = files[0].name;
            }
        }
    </script>
</head>
<body>
<section class="heading">
    <div class="container">
        <h1 class="title">
            K-Means Map Reduce
        </h1>
    </div>
</section>
<form action="/upload" class="form" method="post" enctype="multipart/form-data">
    <div class="container">
        <div class="columns">
            <div class="column">
                <div class="field">
                    <div class="file has-name">
                        <label class="file-label">
                            <input class="file-input" type="file" name="dataCSV" onchange="handleFiles(this.files)"
                                   required>
                            <span class="file-cta">
                        <span class="file-icon">
                            <i class="fas fa-upload"></i>
                        </span>
                        <span class="file-label">
                            Choose a CSV...
                        </span>
                    </span>
                            <span class="file-name"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="field">
            <div class="control">
                <button class="button is-primary">Submit</button>
            </div>
        </div>
    </div>
</form>
<div class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
        <div class="notification is-danger">
            CSV files only
        </div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
</div>
</body>
</html>